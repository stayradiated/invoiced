// Generated by CoffeeScript 1.6.3
(function() {
  var Storage, mysql;

  mysql = require('mysql');

  Storage = (function() {
    var _this = this;

    function Storage() {
      this.db = mysql.createConnection({
        host: '127.0.0.1',
        port: 8889,
        user: 'nodejs',
        password: 'nodejs',
        database: 'invoicer'
      });
      this.db.connect();
    }

    saveInvoice(data)(function() {
      var client, invoice;
      client = {
        name: data.details.clientName,
        address: data.details.clientAddress,
        city: data.details.clientCity,
        postcode: data.details.clientPostcode
      };
      invoice = {
        id: data.details.invoiceId,
        date: data.details.invoiceDate,
        customer: data.details.jobCustomer,
        site: data.details.jobSite,
        cost: data.details.jobAmount,
        paid: false
      };
      return Storage.db.query('INSERT INTO clients SET ?', client, function() {
        return console.log(arguments);
      });
    });

    return Storage;

  }).call(this);

  module.exports = Storage;

}).call(this);
